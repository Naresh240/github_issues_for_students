aws logs filter-log-events --log-group-name "/ucc/eks/dm-campaign-process-manager/dev" --filter-pattern "INFO" --limit 20

aws logs put-metric-filter --log-group-name "/ucc/eks/dm-campaign-process-manager/dev" --filter-name "InfoLogFilter" --filter-pattern "INFO" --metric-transformations "metricName=InfoLogCount,metricNamespace=UccDmApp,metricValue=1"

aws logs describe-metric-filters --log-group-name "/ucc/eks/dm-campaign-process-manager/dev"

aws cloudwatch put-metric-alarm --alarm-name "InfoLogAlarm" --alarm-description "Alarm when INFO logs appear in dm-campaign-process-manager" --metric-name "InfoLogCount" --namespace "UccDmApp" --statistic Sum --period 60 --threshold 0 --comparison-operator GreaterThanThreshold --evaluation-periods 1 --treat-missing-data notBreaching --alarm-actions test-sns-topic

    request_data = {
    trigger = message['Trigger']
    
    namespace = None
    metric_name = None

    if 'Metrics' in trigger:   # Composite metrics (array style)
        namespace = trigger['Metrics'][0]['MetricStat']['Metric']['Namespace']
        metric_name = trigger['Metrics'][0]['MetricStat']['Metric']['MetricName']
    elif 'MetricName' in trigger and 'Namespace' in trigger:  # Normal case
        namespace = trigger['Namespace']
        metric_name = trigger['MetricName']

    print(f"Namespace: {namespace}, MetricName: {metric_name}")
